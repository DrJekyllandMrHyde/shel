/*

 This file is part of Baus.js (acronym for Browser Access Unix Shell)
 Copyright (C) 2013  Jakub Jankiewicz <http://jcubic.pl>

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.

*/
var baus={version:"0.1"};
$(function(){$.omap({blue:"#55f",green:"#4d4",grey:"#999"},function(a,b){return function(f){return"[[;"+b+";]"+f+"]"}});var g;rpc({url:"",error:function(a){a=a.error?a.error.message+"\n["+a.error.at+"] "+a.error.line:a.message||a;var b=$.terminal.active();if(b){b.resume();b.error(a)}else alert(a);g&&g(null)}})(function(a){a.installed()(function(b){var f=[" _                        _\n| |__   __ _ _   _ ___   (_)___\n| '_ \\ / _` | | | / __|  | / __|\n| |_) | (_| | |_| \\__ \\_ | \\__ \\\n|_.__/ \\__,_|\\__,_|___(_)/ |___/\n                       |__/","Browser Access Unix Shell v. "+
baus.version,""].join("\n"),h=$("body").terminal(function(d,c){if(d==="install"){c.echo("Type your admin password");c.set_mask(true);c.push(function(e){c.pop();c.set_mask(false);a.set_admin_password(e)(function(){})},{prompt:"password: "})}},{greetings:b?null:f,onBeforeLogin:function(d){d.echo(f)},onAfterLogin:function(){g=null},tabcompletion:true,completion:function(d,c,e){e(["install"])},login:b?function(d,c,e){g=e;a.login(d,c)(e)}:false}).css({overflow:"auto"});$(window).resize(function(){h.css("height",
$(window).height()-20)}).resize()})})});
